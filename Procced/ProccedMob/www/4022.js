"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4022],{4022:(A,d,s)=>{s.r(d),s.d(d,{DocumentosPageModule:()=>Y});var c=s(9893),r=s(177),g=s(4341),p=s(1307),m=s(4932),u=s(467),h=s(7392),o=s(4438),b=s(5308),v=s(1567),_=s(3727),C=s(1520),f=s(5035),D=s(6873),F=s(6416),k=s(4952),P=s(4680),j=s(1365);function R(i,a){if(1&i){const t=o.RV6();o.j41(0,"ion-chip",13),o.bIt("click",function(){o.eBV(t);const e=o.XpG();return o.Njj(e.db.revalidaToken(e.db.app.token))}),o.EFF(1),o.k0s()}if(2&i){const t=o.XpG();o.R7$(),o.SpI(" Saindo em ",t.db.timer," min ")}}function $(i,a){if(1&i&&(o.j41(0,"ion-badge",14),o.EFF(1),o.k0s()),2&i){const t=o.XpG();o.R7$(),o.JRh(t.db.qtdNotificacoes)}}function G(i,a){1&i&&(o.j41(0,"ion-title"),o.EFF(1,"Selecione a empresa"),o.k0s())}function T(i,a){if(1&i&&(o.j41(0,"ion-title"),o.EFF(1),o.k0s()),2&i){const t=o.XpG();o.R7$(),o.JRh(t.db.cliente.nome)}}function E(i,a){1&i&&(o.j41(0,"ion-list-header")(1,"ion-title"),o.EFF(2,"Visualiza\xe7\xe3o cliente"),o.k0s()())}function I(i,a){if(1&i){const t=o.RV6();o.j41(0,"ion-item",16),o.bIt("click",function(){const e=o.eBV(t).$implicit,l=o.XpG(2);return o.Njj(l.selecionaClassificacao(e))}),o.EFF(1),o.j41(2,"ion-badge",3),o.EFF(3),o.k0s()()}if(2&i){const t=a.$implicit;o.R7$(),o.Lme(" ",t.classificacao," - ",t.descricao," "),o.R7$(2),o.JRh(t.qtdDoc)}}function N(i,a){if(1&i&&(o.j41(0,"ion-list"),o.DNE(1,E,3,0,"ion-list-header",10)(2,I,4,3,"ion-item",15),o.k0s()),2&i){const t=o.XpG();o.R7$(),o.Y8G("ngIf",t.db.cliente&&t.db.classificacoesCliente),o.R7$(),o.Y8G("ngForOf",t.db.classificacoesCliente)}}function X(i,a){1&i&&(o.j41(0,"ion-list-header")(1,"ion-title"),o.EFF(2,"Visualiza\xe7\xe3o interna"),o.k0s()())}function y(i,a){if(1&i){const t=o.RV6();o.j41(0,"ion-item",5),o.bIt("click",function(){const e=o.eBV(t).$implicit,l=o.XpG(2);return o.Njj(l.selecionaClassificacao(e))}),o.j41(1,"div"),o.EFF(2),o.k0s(),o.j41(3,"ion-badge",3),o.EFF(4),o.k0s()()}if(2&i){const t=a.$implicit;o.R7$(),o.xc7("padding-left",30*(t.nivel-1)+"px"),o.R7$(),o.Lme(" ",t.classificacao," - ",t.descricao," "),o.R7$(2),o.JRh(t.qtdDoc)}}function S(i,a){if(1&i&&(o.j41(0,"ion-list"),o.DNE(1,X,3,0,"ion-list-header",10)(2,y,5,5,"ion-item",17),o.k0s()),2&i){const t=o.XpG();o.R7$(),o.Y8G("ngIf",t.db.cliente&&t.db.classificacoesCliente),o.R7$(),o.Y8G("ngForOf",t.db.classificacoes)}}const U=[{path:"",component:(()=>{class i{docSvc;notSvc;db;usuSvc;plt;svc;modalController;navCtrl;selCli;selDoc;selNot;app;logo;documentos;idCliente;idClassificacao;clientes;constructor(t,n,e,l,M,V,O,B,J,W,L,z){this.docSvc=t,this.notSvc=n,this.db=e,this.usuSvc=l,this.plt=M,this.svc=V,this.modalController=O,this.navCtrl=B,this.selCli=J,this.selDoc=W,this.selNot=L,this.app=z}ionViewWillEnter(){console.log(" wilenter"),3==this.db.app.tipoUsuario?this.navCtrl.navigateRoot("/documentos-colaborador"):this.plt.ready().then(()=>{this.db.getCliente()?(this.carregaClassificacoes(),this.app.setSelectedIndex("Documentos")):this.selecionaCliente()})}abreNotificacao(){this.selNot.selecionaNotificacao().finally(()=>{this.carregaClassificacoes()})}carregaClassificacoes(){this.db.mostraProcessando(),this.docSvc.ListaClassificacoes({token:this.db.app.token,idCliente:this.db.cliente?.id,versao:3}).subscribe(t=>{t.status&&(this.db.setClassificacoes(t.classificacoes),this.db.setClassificacoesCliente(t.classificacoesCliente),this.db.escondeProcessando(),this.selNot.carregaQtdNotificacoes(),this.db.renovaToken(t.novoToken))},t=>{this.db.escondeProcessando(t.error)})}selecionaCliente(){var t=this;return(0,u.A)(function*(){console.log("entoru antes dbcliente");const n=yield t.selCli.selecionaCliente();console.log(n),n.data.status&&t.db.cliente&&(console.log("entoru com dbcliente"),t.carregaClassificacoes())})()}selecionaClassificacao(t){var n=this;return(0,u.A)(function*(){const e=yield n.selDoc.selecionaDocumento(n.db.cliente,t);console.log(e.data),e.data.acessadoNaoLido&&n.carregaClassificacoes()})()}abreDocumento(t){console.log(this.plt.is("capacitor")),this.docSvc.Get({token:this.db.app.token,id:t,tipoRetorno:2}).subscribe(n=>{h.P.open({url:n.link})})}static \u0275fac=function(n){return new(n||i)(o.rXU(b.g),o.rXU(v.l),o.rXU(_.a),o.rXU(C.o),o.rXU(f.OD),o.rXU(D.o),o.rXU(c.W3),o.rXU(f.q9),o.rXU(F.G),o.rXU(k.s),o.rXU(P.q),o.rXU(j.Z))};static \u0275cmp=o.VBU({type:i,selectors:[["app-documentos"]],decls:22,vars:6,consts:[["color","primary",1,"alturamenor"],["slot","start",1,"alturamenor"],[1,"alturamenor"],["slot","end"],["class","sessao",3,"click",4,"ngIf"],[3,"click"],["slot","start","name","logo-whatsapp"],[1,"alturamenor",3,"click"],["slot","icon-only","name","notifications-outline"],["top","","color","danger",4,"ngIf"],[4,"ngIf"],["slot","icon-only","name","search-outline"],["fullScreen",""],[1,"sessao",3,"click"],["top","","color","danger"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],[3,"click",4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o.nrm(3,"ion-menu-button",2),o.k0s(),o.j41(4,"ion-buttons",3),o.DNE(5,R,2,1,"ion-chip",4),o.j41(6,"ion-button",5),o.bIt("click",function(){return e.db.sendWhats()}),o.nrm(7,"ion-icon",6),o.k0s(),o.j41(8,"ion-button",7),o.bIt("click",function(){return e.abreNotificacao()}),o.nrm(9,"ion-icon",8),o.DNE(10,$,2,1,"ion-badge",9),o.k0s()(),o.j41(11,"ion-title"),o.EFF(12,"Documentos"),o.k0s()(),o.j41(13,"ion-toolbar",7),o.bIt("click",function(){return e.selecionaCliente()}),o.DNE(14,G,2,0,"ion-title",10)(15,T,2,1,"ion-title",10),o.j41(16,"ion-buttons",3)(17,"ion-button"),o.nrm(18,"ion-icon",11),o.k0s()()()(),o.j41(19,"ion-content",12),o.DNE(20,N,3,2,"ion-list",10)(21,S,3,2,"ion-list",10),o.k0s()),2&n&&(o.R7$(5),o.Y8G("ngIf",e.db.timer<=e.db.minMostraTimer),o.R7$(5),o.Y8G("ngIf",e.db.qtdNotificacoes>0),o.R7$(4),o.Y8G("ngIf",!e.db.cliente),o.R7$(),o.Y8G("ngIf",e.db.cliente),o.R7$(5),o.Y8G("ngIf",e.db.cliente&&e.db.classificacoesCliente),o.R7$(),o.Y8G("ngIf",e.db.cliente&&e.db.classificacoes))},dependencies:[c.In,c.Jm,c.QW,c.ZB,c.W9,c.eU,c.iq,c.uz,c.nf,c.AF,c.MC,c.BC,c.ai,r.Sq,r.bT],styles:[".colDir[_ngcontent-%COMP%]{text-align:right}.colCen[_ngcontent-%COMP%]{text-align:center}.logo[_ngcontent-%COMP%]{max-height:35px}ion-list-header[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary)}"]})}return i})()}];let x=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[m.iI.forChild(U),m.iI]})}return i})(),Y=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[c.bv,r.MD,g.YN,p.S,x]})}return i})()}}]);