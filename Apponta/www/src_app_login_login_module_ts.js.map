{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts","./src/app/login/login.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { GetConfiguracaoResponse } from './../interface/reval';\nimport { Router } from '@angular/router';\nimport { DbService } from './../storage/db.service';\nimport { UsuarioService } from './../api/usuario.service';\nimport { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, MenuController, Platform } from '@ionic/angular';\nimport {  PluginListenerHandle } from '@capacitor/core';\n//import { ErrorsMessage } from '../../environments/messages'\n\nimport { AppService } from '../api/app.service';\nimport { _SERVER } from '../guards/load-setup.guard';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\n\nexport class LoginPage implements OnInit {\n  public email: string;\n  public resetSenha: boolean;\n  public backButtonListenerHandle: PluginListenerHandle\n\n  constructor(private svc: UsuarioService,\n              public db: DbService,\n              private platform: Platform,\n              private routerOutlet: IonRouterOutlet,\n              private router: Router,\n              public menuCtrl: MenuController,\n              public svcApp: AppService,\n              ) {\n\n              }\n\n\n\n\n  ngOnInit() {\n    console.log('ngOnInit1');\n     this.svcApp.GetConfiguracoes().subscribe((ret) => {\n      console.log('ret',ret);\n\n       if(ret.status) {\n        if(ret.urlLogo.substring(0,4) == \"http\") this.db.urlLogo = ret.urlLogo;\n        else  this.db.urlLogo = _SERVER +'/app/v1/' + ret.urlLogo;\n       }\n     })\n  //  this.menuCtrl.enable(false);\n//    console.log(this.db.app.logo)\n  }\n\n  ionViewDidEnter() {\n    this.db.limpaSessao()\n//    this.logo = this.db.urlLogo;\n    this.email = this.db.getUsuario()\n\n  }\n\n  ionViewDidLeave() {\n  if (this.backButtonListenerHandle) {\n    this.backButtonListenerHandle.remove()\n    this.backButtonListenerHandle = null\n  }\n}\n\n  login(form){\n    this.db.mostraProcessando();\n    this.svc.GetToken({\n      usuario: form.value.email,\n      senha: form.value.password\n    }).subscribe(ret=>{\n      if(ret.status) {\n        this.db.escondeProcessando();\n        console.log(ret)\n        if(this.db.getUsuario() !== form.value.email) this.db.limpaSessao()\n        this.db.setUsuario(form.value.email)\n      this.db.getMenu(ret.token)\n        this.db.setToken(ret.token);\n      } else {\n        this.db.escondeProcessando(ret.error);\n      }\n    },\n    err=>{\n      this.db.escondeProcessando('Erro de conexão ' + err.message)\n    })\n  }\n \n  esqueciSenha(form) {\n    console.log('form:',form)\n    if(form.value.email == '') this.db.setMensagem('Informe o usuário')\n    else {\n      this.svc.ResetaSenha({\n        usuario: form.value.email,\n        metodo: 'email'\n      }).subscribe(ret=>{\n        if(ret.error) this.db.setMensagem(ret.error)\n        else {\n          this.db.setMensagem('Enviado email com nova senha')\n          this.resetSenha = false\n        }\n      })\n    }\n  }\n\n  setup() {\n    this.db.Abre('setup')\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.itemSemBorda {\n  display: flex;\n}\n.itemSemBorda ion-input {\n  margin: auto;\n}\n\ndiv {\n  width: 50%;\n  margin: auto;\n  min-width: 250px;\n}\n\nion-button {\n  min-width: 250px;\n}\n\n#setup {\n  min-width: 30px;\n}\n\n.esqueciSenha {\n  color: var(--ion-color-primary);\n  cursor: pointer;\n  font-size: smaller;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/login/login.page.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,aAAA;AACJ;AACI;EACI,YAAA;AACR;;AAGA;EACG,UAAA;EACA,YAAA;EACA,gBAAA;AAAH;;AAGA;EACI,gBAAA;AAAJ;;AAGA;EACI,eAAA;AAAJ;;AAGA;EACI,+BAAA;EACA,eAAA;EACA,kBAAA;AAAJ\",\"sourcesContent\":[\".itemSemBorda {\\r\\n    display: flex;\\r\\n\\r\\n    ion-input { \\r\\n        margin: auto;\\r\\n    }\\r\\n}\\r\\n\\r\\ndiv {\\r\\n   width: 50%; \\r\\n   margin: auto;\\r\\n   min-width: 250px;\\r\\n}\\r\\n\\r\\nion-button {\\r\\n    min-width: 250px;\\r\\n}\\r\\n\\r\\n#setup {\\r\\n    min-width: 30px;\\r\\n}\\r\\n\\r\\n.esqueciSenha {\\r\\n    color: var(--ion-color-primary);\\r\\n    cursor: pointer; \\r\\n    font-size: smaller;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","LoginPage","routes","path","component","LoginPageRoutingModule","__decorate","imports","forChild","exports","CommonModule","FormsModule","IonicModule","LoginPageModule","declarations","Router","DbService","UsuarioService","Component","IonRouterOutlet","MenuController","Platform","AppService","_SERVER","svc","db","platform","routerOutlet","router","menuCtrl","svcApp","email","resetSenha","backButtonListenerHandle","constructor","ngOnInit","console","log","GetConfiguracoes","subscribe","ret","status","urlLogo","substring","ionViewDidEnter","limpaSessao","getUsuario","ionViewDidLeave","remove","login","form","mostraProcessando","GetToken","usuario","value","senha","password","escondeProcessando","setUsuario","getMenu","token","setToken","error","err","message","esqueciSenha","setMensagem","ResetaSenha","metodo","setup","Abre","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}