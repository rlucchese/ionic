{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts","./src/app/login/login.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { _VERSAO } from '../storage/db.service'\n\nimport { GetConfiguracaoResponse } from '../interface/brMetal';\nimport { Router } from '@angular/router';\nimport { DbService, _LOCAL } from './../storage/db.service';\nimport { UsuarioService } from './../api/usuario.service';\nimport { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, MenuController, Platform } from '@ionic/angular';\nimport {  PluginListenerHandle } from '@capacitor/core';\nimport { AppService } from '../api/app.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\n\nexport class LoginPage implements OnInit {\n  public email: string;\n  public resetSenha: boolean;\n  public backButtonListenerHandle: PluginListenerHandle\n  public versao = _VERSAO\n\n  constructor(private svc: UsuarioService,\n              public db: DbService,\n              private platform: Platform,\n              private routerOutlet: IonRouterOutlet,\n              private router: Router,\n              public menuCtrl: MenuController,\n              public svcApp: AppService\n              ) {\n\n              }\n\n\n\n\n  ngOnInit() {\n//    console.log('ngOnInit1');\n//     this.db.getLocal()\n//     console.log(_LOCAL)\n     this.svcApp.GetConfiguracoes().subscribe((ret) => {\n      console.log('ret',ret);\n\n       if(ret.status) this.db.urlLogo = ret.urlLogo;\n     })\n  //  this.menuCtrl.enable(false);\n//    console.log(this.db.app.logo)\n  }\n\n  ionViewDidEnter() {\n    this.db.limpaSessao()\n//    this.logo = this.db.urlLogo;\n    this.email = this.db.getUsuario()\n\n  }\n\n  ionViewDidLeave() {\n  if (this.backButtonListenerHandle) {\n    this.backButtonListenerHandle.remove()\n    this.backButtonListenerHandle = null\n  }\n}\n\n  login(form){\n    this.db.mostraProcessando();\n    this.svc.GetToken({\n      usuario: form.value.email,\n      senha: form.value.password\n    }).subscribe(ret=>{\n      if(ret.status) {\n        this.db.escondeProcessando();\n       // console.log(ret)\n        if(this.db.getUsuario() !== form.value.email) this.db.limpaSessao()\n        this.db.setUsuario(form.value.email)\n        this.db.setToken(ret.token);  \n      } else {\n        this.db.escondeProcessando(ret.error);  \n      }\n    },\n    err=>{\n      this.db.escondeProcessando( err.message)\n    })\n  }\n\n  setLocal(local: string) {\n    this.db.setLocal(local);\n  }\n\n  esqueciSenha(form) {\n    console.log('form:',form)\n    if(form.value.email == '') this.db.setMensagem('Informe o usuÃ¡rio')\n    else {\n      this.svc.ResetaSenha({\n        usuario: form.value.email,\n        metodo: 'email'\n      }).subscribe(ret=>{\n        if(ret.error) this.db.setMensagem(ret.error)\n        else {\n          this.db.setMensagem('Enviado email com nova senha')\n          this.resetSenha = false\n        }\n      })\n    }\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.itemSemBorda {\n  display: flex;\n}\n.itemSemBorda ion-input {\n  margin: auto;\n}\n\ndiv {\n  width: 50%;\n  margin: auto;\n  min-width: 250px;\n}\n\nion-button {\n  min-width: 250px;\n}\n\n.esqueciSenha {\n  color: var(--ion-color-primary);\n  cursor: pointer;\n  font-size: smaller;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/login/login.page.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,aAAA;AACJ;AACI;EACI,YAAA;AACR;;AAGA;EACG,UAAA;EACA,YAAA;EACA,gBAAA;AAAH;;AAGA;EACI,gBAAA;AAAJ;;AAGA;EACI,+BAAA;EACA,eAAA;EACA,kBAAA;AAAJ\",\"sourcesContent\":[\".itemSemBorda {\\r\\n    display: flex;\\r\\n\\r\\n    ion-input { \\r\\n        margin: auto;\\r\\n    }\\r\\n}\\r\\n\\r\\ndiv {\\r\\n   width: 50%; \\r\\n   margin: auto;\\r\\n   min-width: 250px;\\r\\n}\\r\\n\\r\\nion-button {\\r\\n    min-width: 250px;\\r\\n}\\r\\n\\r\\n.esqueciSenha {\\r\\n    color: var(--ion-color-primary);\\r\\n    cursor: pointer; \\r\\n    font-size: smaller;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","LoginPage","routes","path","component","LoginPageRoutingModule","__decorate","imports","forChild","exports","CommonModule","FormsModule","IonicModule","LoginPageModule","declarations","_VERSAO","Router","DbService","UsuarioService","Component","IonRouterOutlet","MenuController","Platform","AppService","svc","db","platform","routerOutlet","router","menuCtrl","svcApp","email","resetSenha","backButtonListenerHandle","versao","constructor","ngOnInit","GetConfiguracoes","subscribe","ret","console","log","status","urlLogo","ionViewDidEnter","limpaSessao","getUsuario","ionViewDidLeave","remove","login","form","mostraProcessando","GetToken","usuario","value","senha","password","escondeProcessando","setUsuario","setToken","token","error","err","message","setLocal","local","esqueciSenha","setMensagem","ResetaSenha","metodo","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}